import{_ as w,h as c,r as p,c as t,a as o,w as r,v as i,g as u,o as n}from"./index-C0_UyLa7.js";import{a as m}from"./axios-BimPEqV4.js";const C={id:"signUpPage",class:"bg-yellow"},b={class:"conatiner signUpPage vhContainer"},y={class:"formControls",action:"index.html"},_={key:0},k={key:1},x={key:2},U={key:3},h="https://todolist-api.hexschool.io",V={__name:"SignupPage",setup(P){const d=c();console.log(m);const e=p({email:"",password:"",nickname:"",passwordConfirm:""}),f=p(""),g=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,v=async()=>{if(!e.value.email||!e.value.password||!e.value.nickname||!e.value.passwordConfirm){alert("所有欄位皆為必填，請檢查後再試");return}if(!g.test(e.value.email)){alert("請輸入正確的 email 格式");return}try{const a=await m.post(`${h}/users/sign_up`,e.value);f.value=a.data.uid,alert("註冊成功，請登入"),setTimeout(()=>{d.push({path:"/login",query:{email:e.value.email}})},2e3)}catch(a){a.response&&a.response.data.message?alert("此帳號已註冊過"):console.error("註冊錯誤：",a)}};return(a,s)=>(n(),t("div",C,[o("div",b,[s[11]||(s[11]=o("div",{class:"side"},[o("a",{href:"#"},[o("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),o("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1)),o("div",null,[o("form",y,[s[4]||(s[4]=o("h2",{class:"formControls_txt"},"註冊帳號",-1)),s[5]||(s[5]=o("label",{class:"formControls_label",for:"email"},"Email",-1)),r(o("input",{class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email",required:"","onUpdate:modelValue":s[0]||(s[0]=l=>e.value.email=l)},null,512),[[i,e.value.email]]),e.value.email?u("",!0):(n(),t("span",_,"此欄位不可留空")),s[6]||(s[6]=o("label",{class:"formControls_label",for:"name"},"您的暱稱",-1)),r(o("input",{class:"formControls_input",type:"text",name:"name",id:"name",placeholder:"請輸入您的暱稱","onUpdate:modelValue":s[1]||(s[1]=l=>e.value.nickname=l)},null,512),[[i,e.value.nickname]]),e.value.nickname?u("",!0):(n(),t("span",k,"此欄位不可留空")),s[7]||(s[7]=o("label",{class:"formControls_label",for:"pwd"},"密碼",-1)),r(o("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼",required:"","onUpdate:modelValue":s[2]||(s[2]=l=>e.value.password=l)},null,512),[[i,e.value.password]]),e.value.password?u("",!0):(n(),t("span",x,"此欄位不可留空")),s[8]||(s[8]=o("label",{class:"formControls_label",for:"pwd"},"再次輸入密碼",-1)),r(o("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請再次輸入密碼",required:"","onUpdate:modelValue":s[3]||(s[3]=l=>e.value.passwordConfirm=l)},null,512),[[i,e.value.passwordConfirm]]),e.value.passwordConfirm?u("",!0):(n(),t("span",U,"此欄位不可留空")),o("input",{class:"formControls_btnSubmit",type:"button",value:"註冊帳號",onClick:v}),s[9]||(s[9]=o("br",null,null,-1)),s[10]||(s[10]=o("a",{class:"formControls_btnLink",href:"/login"},"登入",-1))])])])]))}},I=w(V,[["__scopeId","data-v-ba24e507"]]);export{I as default};
